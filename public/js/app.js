if(!app)var app=angular.module("myApp",["ui.router","ui.mask","LocalStorageModule","ngResource","ngSanitize","nya.bootstrap.select","chart.js"]);app.config(["$stateProvider","$urlRouterProvider","$sceDelegateProvider","ChartJsProvider",function(e,t,r,o){e.state("auth",{url:"/auth",controller:"AuthCtrl",controllerAs:"mv",templateUrl:"./views/home/auth.html"}).state("app",{url:"/app",templateUrl:"./views/home/home.html"}).state("app.projects",{url:"/projects",templateUrl:"./views/projects/projectList.html"}).state("app.releases",{url:"/projects/:id",templateUrl:"./views/projects/projectReleases.html",controllerAs:"mv",controller:"ProjectCtrl"}),t.otherwise("/"),o.setOptions({colors:["#803690","#00ADF9","#DCDCDC","#46BFBD","#FDB45C","#949FB1","#4D5360"]})}]);
!function(){app.controllers||(app.controllers={}),app.controllers.admin=function(t,o,n,e,i,r,c){t.init=function(){n(function(){r.isLoggedAlready()?o.transitionTo("app.projects"):o.transitionTo("auth")})},t.logOut=function(){r.deleteCredentials(),n(function(){o.transitionTo("auth")})},t.parseHTML=function(t){t.HTMLDescription=e.trustAsHtml(t.Description)},t.projects=c.get("projects")},app.controller("AdminCtrl",["$scope","$state","$timeout","$sce","dataService","authService","localStorageService",app.controllers.admin])}();
!function(){app.controllers||(app.controllers={}),app.controllers.auth=function(t,e,o,r,n,a,c,s){t.submit=function(){r.authUser(t.username,t.token).then(function(r){o(function(){"200"==r.status&&(a.success(c.APP_AUTH_SUCCESS_TITLE,c.APP_AUTH_SUCCESS_MESSAGE),n.createCredentials(t.username,t.token),s.set("projects",r.data),e.transitionTo("app.projects"))})}).catch(function(t){a.error(c.APP_AUTH_ERROR_TITLE,c.APP_AUTH_ERROR_MESSAGE)})}},app.controller("AuthCtrl",["$scope","$state","$timeout","dataService","authService","toastrService","constantsService","localStorageService",app.controllers.auth])}();
!function(){app.controllers||(app.controllers={}),app.controllers.header=function(e,n,r){e.mv.items=n.APP_NAVIGATION,e.mv.username=r.get("username")}}();


!function(){app.controllers||(app.controllers={}),app.controllers.chartBars=function(o){}}();
!function(){app.controllers||(app.controllers={}),app.controllers.projects=function(e,t,a,r,i,n){e.projectId=t.id,e.selected={},e.releases=[],e.users=[],e.project=[],e.incidents=[],e.incidentsTypes=[],e.filteredByRelease=[],e.years=[],e.chart1={},e.chart2={},e.chart3={},e.chart4={},e.chart5={},a.getProjectById(t.id).then(function(t){e.project=t.data}),a.getProjectUsersById(t.id).then(function(t){e.users=t.data}),a.getProjectIncidentsTypeById(t.id).then(function(t){e.incidentsTypes=t.data}),a.getProjectIncidentsCountById(t.id).then(function(r){a.getProjectIncidentsById(t.id,r.data).then(function(t){e.incidents=t.data,e.years=e.getLabelsArray(e.incidents,"CreationDate","year");var a=new Date;e.selected.year=moment(a.setFullYear(a.getFullYear()-1)).year(),i(e.build())})}),a.getProjectReleasesById(t.id).then(function(t){e.releases=t.data}),e.build=function(){e.filterReleaseByMonths(),e.filterReleases(),e.selected.release=null,e.filteredByRelease=[]},e.filterReleaseByMonths=function(){var t=(e.getChartObject("chart1"),[e.selected.year,"filterByYear"]),a=r("filterFindBy")(e.incidents,t);e.releasesVersionNumber=e.getLabelsArray(a,"DetectedReleaseVersionNumber","default");var i=[e.releasesVersionNumber,"filterReleaseVersionNumber"];e.releasesNames=r("filterFindBy")(e.releases,i),e.chart1.labels=n.APP_PROJECT_MONTHS,e.chart1.data=e.bindArrayWithQuantity(e.chart1.labels,a,"filterByMonth"),e.chart1.display=e.validateDataArray(e.chart1.data),e.chart1.options={defaultFontStyle:"italic",title:{display:!0,text:"Total Incidents Reported By Year"}}},e.filterReleases=function(){var t=[e.selected.year,"filterByYear"],a=r("filterFindBy")(e.incidents,t),i=e.getLabelsArray(a,"DetectedReleaseVersionNumber","default");e.chart2.labels=i,e.chart2.data=e.bindArrayWithQuantity(i,e.incidents,"filterByReleaseVersionNumber"),e.chart2.display=e.validateDataArray(e.chart2.data),e.chart2.options={title:{display:!0,text:"Total Incidents Reported By Release"}}},e.filterReleaseByReleaseVersion=function(t){var a=[t.VersionNumber,"filterByReleaseVersionNumber"];e.filteredByRelease=r("filterFindBy")(e.incidents,a);var i=e.getLabelsArray(e.filteredByRelease,"IncidentTypeName","default");e.chart3.labels=i,e.chart3.data=e.bindArrayWithQuantity(i,e.filteredByRelease,"filterByIncidentTypeName"),e.chart3.display=e.validateDataArray(e.chart3.data),e.chart3.options={title:{display:!0,text:"Total Release Incidents Reported By Type"}},e.filterReleaseByStatus(),e.filterReleaseByOpenerName()},e.filterReleaseByStatus=function(t){var a=e.getLabelsArray(e.filteredByRelease,"IncidentStatusName","default");e.chart4.labels=a,e.chart4.data=e.bindArrayWithQuantity(a,e.filteredByRelease,"filterByIncidentStatusName"),e.chart4.display=e.validateDataArray(e.chart4.data),e.chart4.options={title:{display:!0,text:"Total Release Incidents Reported By Status"}}},e.filterReleaseByOpenerName=function(t){var a=e.getLabelsArray(e.filteredByRelease,"OpenerName","default");e.chart5.labels=a,e.chart5.data=e.bindArrayWithQuantity(a,e.filteredByRelease,"filterByIncidentOpenerName"),e.chart5.display=e.validateDataArray(e.chart5.data),e.chart5.options={title:{display:!0,text:"Total Release Incidents Reported By Opener"}}},e.bindArrayWithQuantity=function(e,t,a){var i=[];return $(e).each(function(e,n){var l=[n,a],s=r("filterFindBy")(t,l);i.push(s.length)}),i},e.bindArrayWithValue=function(e,t,a){var i=[];return $(e).each(function(e,n){var l=[n,a],s=r("filterFindBy")(t,l);i.push(s)}),i},e.getLabelsArray=function(e,t,a){var r=[];return $(e).each(function(e,i){switch(a){case"default":r.indexOf(i[t])==-1&&i[t]&&r.push(i[t]);break;case"year":var n=moment(i[t]).year();r.indexOf(n)==-1&&n&&r.push(n)}}),r},e.validateDataArray=function(e){var t=!1;return 0==e.length?t:(e.map(function(e){0!=e&&(t=!0)}),t)},e.getChartObject=function(e){var t=new Chart($("#"+e).get(0).getContext("2d"));return t}},app.controller("ProjectCtrl",["$scope","$stateParams","dataService","$filter","$timeout","constantsService",app.controllers.projects])}();
!function(){app.filter("trust",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}])}();
!function(){app.filter("filterFindBy",["constantsService",function(e){return function(t,a){for(var r=[],s=a[0],n=a[1],i=0;i<t.length;i++){var c=t[i];switch(n){case"filterByReleaseId":c.DetectedReleaseId==s&&r.push(c);break;case"filterByMonth":Date.prototype.monthNames=e.APP_PROJECT_MONTHS,Date.prototype.getMonthName=function(){return this.monthNames[this.getMonth()]};var l=new Date(moment(c.CreationDate)).getMonthName();l==s&&r.push(c);break;case"filterByYear":var o=moment(new Date(moment(c.CreationDate))).year();o==s&&r.push(c);break;case"filterByReleaseValue":c.ReleaseId==s&&r.push(c.Name);break;case"filterActiveRelease":c.Active==s&&r.push(c);break;case"filterReleaseExist":s.map(function(e){c==e.ReleaseId&&r.push(c)});break;case"filterByReleaseVersionNumber":c.DetectedReleaseVersionNumber==s&&r.push(c);break;case"filterReleaseVersionNumber":s.map(function(e){c.VersionNumber==e&&r.push(c)});break;case"filterReleaseByReleaseId":c.ReleaseId==s&&(r=c);break;case"filterByIncidentTypeName":c.IncidentTypeName==s&&r.push(c);break;case"filterByIncidentStatusName":c.IncidentStatusName==s&&r.push(c);break;case"filterByIncidentOpenerName":c.OpenerName==s&&r.push(c)}}return r}}])}();
!function(){var e={PROJECTS:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects?",PROJECT:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}?",PROJECT_RELEASES:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/releases?",PROJECT_USERS:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/users?",PROJECT_INCIDENTS:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/incidents/search?start_row=0&number_rows={1}&",PROJECT_INCIDENTS_TYPES:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/incidents/types?",PROJECT_INCIDENTS_COUNT:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/incidents/count?"};app.constant("apiService",e)}();
!function(){function e(e){var t=$.proxy(function(t,n){e.set("username",t),e.set("token",n)},this),n=function(){return void 0!=r()},r=$.proxy(function(){return e.get("username")},this),o=$.proxy(function(){return e.get("token")},this),i=function(){e.remove("projects"),e.remove("username"),e.remove("token")};return{isLoggedAlready:n,getUsername:r,getToken:o,createCredentials:t,deleteCredentials:i}}e.$inject=["localStorageService"],app.factory("authService",e)}();
!function(){var e={APP_TITLE:"Spira Toolbox",APP_DESCRIPTION:"Great for learning Angular features.",APP_VERSION:"1.0",APP_NAVIGATION:[{state:"app",header:"Me",active:!1},{state:"app.projects",header:"Projects",active:!1},{state:"app.charts",header:"Charts",active:!1}],APP_AUTH_SUCCESS_TITLE:"Awesome.",APP_AUTH_SUCCESS_MESSAGE:"You were successfully authenticated.",APP_AUTH_ERROR_TITLE:"Oh no!.",APP_AUTH_ERROR_MESSAGE:"Please provide valid user information.",APP_PROJECT_MONTHS:["January","February","March","April","May","June","July","August","September","October","November","December"],APP_PROJECT_YEARS:["2015","2016","2017","2018","2019","2020","2021","2022","2023","2024","2025","2025","2026"]};app.constant("constantsService",e)}();
!function(){function e(e,r,t,n){var c=function(r,t){var n=p(e.PROJECTS,r,t);return I(n)},u=function(){return n.get("username")},a=function(){return n.get("token")},o=function(){return n.get("projects")},i=function(r){var t=p(e.PROJECT,u(),a());return I(t.replace("{0}",r))},l=function(r){var t=p(e.PROJECT_RELEASES,u(),a());return I(t.replace("{0}",r))},s=function(r){var t=p(e.PROJECT_USERS,u(),a());return I(t.replace("{0}",r))},P=function(r,t){var n=p(e.PROJECT_INCIDENTS,u(),a());return I(n.replace("{0}",r).replace("{1}",t))},f=function(r){var t=p(e.PROJECT_INCIDENTS_TYPES,u(),a());return I(t.replace("{0}",r))},E=function(r){var t=p(e.PROJECT_INCIDENTS_COUNT,u(),a());return I(t.replace("{0}",r))},I=function(e){return r({method:"JSONP",url:t.trustAsResourceUrl(e),callbackKey:"callback"})},p=function(e,r,t){return e+"username="+r+"&api-key="+t};return{authUser:c,getAllProjects:o,getProjectById:i,getProjectReleasesById:l,getProjectUsersById:s,getProjectIncidentsById:P,getProjectIncidentsTypeById:f,getProjectIncidentsCountById:E}}e.$inject=["apiService","$http","$sce","localStorageService"],app.factory("dataService",e)}();
!function(){function r(){var r=function(r,t){toastr.success(t,r)},t=function(r,t){toastr.info(t,r)},o=function(r,t){toastr.error(t,r)};return{success:r,info:t,error:o}}app.factory("toastrService",r)}();
!function(){app.component("bars",{templateUrl:"./views/projects/charts/chartBars.html",bindings:{data:"=",selector:"@",title:"@",labels:"=",series:"=",display:"=",options:"=",year:"=",colors:"="},controllerAs:"mv",controller:["$scope",app.controllers.chartBars]})}();
!function(){app.component("appheader",{templateUrl:"./views/commons/header.html",controllerAs:"mv",controller:["$scope","constantsService","localStorageService",app.controllers.header]})}();


