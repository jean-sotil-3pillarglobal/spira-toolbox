if(!app)var app=angular.module("myApp",["ui.router","ui.mask","LocalStorageModule","ngResource","ngSanitize","nya.bootstrap.select"]);app.config(["$stateProvider","$urlRouterProvider","$sceDelegateProvider",function(e,t,r){e.state("auth",{url:"/auth",controller:"AuthCtrl",controllerAs:"mv",templateUrl:"./views/home/auth.html"}).state("app",{url:"/app",templateUrl:"./views/home/home.html",controllerAs:"mv"}).state("app.projects",{url:"/projects",templateUrl:"./views/projects/projectList.html",controllerAs:"mv"}).state("app.releases",{url:"/projects/:id",templateUrl:"./views/projects/projectReleases.html",controllerAs:"mv",controller:"ProjectCtrl"}),t.otherwise("/")}]);
!function(){app.controllers||(app.controllers={}),app.controllers.admin=function(t,o,n,e,i,r,c){t.init=function(){n(function(){r.isLoggedAlready()?o.transitionTo("app.projects"):o.transitionTo("auth")})},t.logOut=function(){r.deleteCredentials(),n(function(){o.transitionTo("auth")})},t.parseHTML=function(t){t.HTMLDescription=e.trustAsHtml(t.Description)},t.projects=c.get("projects")},app.controller("AdminCtrl",["$scope","$state","$timeout","$sce","dataService","authService","localStorageService",app.controllers.admin])}();
!function(){app.controllers||(app.controllers={}),app.controllers.auth=function(t,e,r,o,a,c,n){t.submit=function(){r.authUser(t.username,t.token).then(function(r){"200"==r.status&&(a.success(c.APP_AUTH_SUCCESS_TITLE,c.APP_AUTH_SUCCESS_MESSAGE),o.createCredentials(t.username,t.token),n.set("projects",r.data),e.transitionTo("app.projects"))}).catch(function(t){a.error(c.APP_AUTH_ERROR_TITLE,c.APP_AUTH_ERROR_MESSAGE)})}},app.controller("AuthCtrl",["$scope","$state","dataService","authService","toastrService","constantsService","localStorageService",app.controllers.auth])}();
!function(){app.controllers||(app.controllers={}),app.controllers.header=function(e,n,r){e.mv.items=n.APP_NAVIGATION,e.mv.username=r.get("username")}}();

!function(){app.controllers||(app.controllers={}),app.controllers.projects=function(e,t,n,c){e.projectId=t.id,e.selected={},e.releases=[],e.users=[],e.project=[],e.incidents=[],e.incidentsTypes=[],e.filteredByRelease=[],n.getProjectById(t.id).then(function(t){e.project=t.data}),n.getProjectReleasesById(t.id).then(function(t){e.releases=t.data}),n.getProjectUsersById(t.id).then(function(t){e.users=t.data}),n.getProjectIncidentsById(t.id).then(function(t){e.incidents=t.data}),n.getProjectIncidentsTypeById(t.id).then(function(t){e.incidentsTypes=t.data}),e.filterReleaseById=function(t){var n=[t,"DetectedReleaseId"];e.filteredByRelease=c("filterFindBy")(e.incidents,n)}},app.controller("ProjectCtrl",["$scope","$stateParams","dataService","$filter",app.controllers.projects])}();

!function(){app.filter("trust",["$sce",function(t){return function(n){return t.trustAsHtml(n)}}])}();
!function(){app.filter("byRelease",[function(){return function(e,t){for(var n=[],r=t[0],a=t[1],c=0;c<e.length;c++){var u=e[c];switch(a){case"DetectedReleaseId":u[a]==r&&n.push(u)}}return n}}])}();
!function(){var e={PROJECTS:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects",PROJECT:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}",PROJECT_RELEASES:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/releases",PROJECT_USERS:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/users",PROJECT_INCIDENTS:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/incidents",PROJECT_INCIDENTS_TYPES:"https://spira.dxide.com/Services/v4_0/RestService.svc/projects/{0}/incidents/types"};app.constant("apiService",e)}();
!function(){function e(e){var t=$.proxy(function(t,n){e.set("username",t),e.set("token",n)},this),n=function(){return void 0!=r()},r=$.proxy(function(){return e.get("username")},this),o=$.proxy(function(){return e.get("token")},this),i=function(){e.remove("projects"),e.remove("username"),e.remove("token")};return{isLoggedAlready:n,getUsername:r,getToken:o,createCredentials:t,deleteCredentials:i}}e.$inject=["localStorageService"],app.factory("authService",e)}();
!function(){var e={APP_TITLE:"Spira Toolbox",APP_DESCRIPTION:"Great for learning Angular features.",APP_VERSION:"1.0",APP_NAVIGATION:[{state:"app",header:"Me",active:!1},{state:"app.projects",header:"Projects",active:!1},{state:"app.charts",header:"Charts",active:!1}],APP_AUTH_SUCCESS_TITLE:"Awesome.",APP_AUTH_SUCCESS_MESSAGE:"You were successfully authenticated.",APP_AUTH_ERROR_TITLE:"Oh no!.",APP_AUTH_ERROR_MESSAGE:"Please provide valid user information."};app.constant("constantsService",e)}();
!function(){function e(e,r,t,n){var c=function(r,t){var n=S(e.PROJECTS,r,t);return E(n)},u=function(){return n.get("username")},a=function(){return n.get("token")},o=function(){return n.get("projects")},i=function(r){var t=S(e.PROJECT,u(),a());return E(t.replace("{0}",r))},l=function(r){var t=S(e.PROJECT_RELEASES,u(),a());return E(t.replace("{0}",r))},s=function(r){var t=S(e.PROJECT_USERS,u(),a());return E(t.replace("{0}",r))},f=function(r){var t=S(e.PROJECT_INCIDENTS,u(),a());return E(t.replace("{0}",r))},P=function(r){var t=S(e.PROJECT_INCIDENTS_TYPES,u(),a());return E(t.replace("{0}",r))},E=function(e){return r({method:"JSONP",url:t.trustAsResourceUrl(e),callbackKey:"callback"})},S=function(e,r,t){return e+"?username="+r+"&api-key="+t};return{authUser:c,getAllProjects:o,getProjectById:i,getProjectReleasesById:l,getProjectUsersById:s,getProjectIncidentsById:f,getProjectIncidentsTypeById:P}}e.$inject=["apiService","$http","$sce","localStorageService"],app.factory("dataService",e)}();
!function(){function r(){var r=function(r,t){toastr.success(t,r)},t=function(r,t){toastr.info(t,r)},o=function(r,t){toastr.error(t,r)};return{success:r,info:t,error:o}}app.factory("toastrService",r)}();
!function(){app.component("appheader",{templateUrl:"./views/commons/header.html",controllerAs:"mv",controller:["$scope","constantsService","localStorageService",app.controllers.header]})}();


